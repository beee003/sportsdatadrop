import{c as n,m as U,j as F,g as u,k as H,i as r,r as N,t as p,b as f,a as c,d as v,A as ne}from"./entry-client-c12fab86.js";import{s as k,A as ie}from"./supabase-5ac2a229.js";import{I as oe}from"./Icon-05c57c7a.js";const ce=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],de=t=>n(oe,U(t,{name:"Upload",iconNode:ce})),j=de;var ue=p("<button>");const pe=t=>{const[e,s]=F(t,["variant","size","class","children"]),a={default:"bg-accent text-black hover:bg-green-300 font-semibold",outline:"border border-accent text-accent hover:bg-accent/10",ghost:"text-accent hover:bg-white/5"},g={sm:"px-3 py-1.5 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return(()=>{var i=u(ue);return H(i,U({get class(){return`rounded-lg transition-all duration-200 ${a[e.variant||"default"]} ${g[e.size||"md"]} ${e.class||""}`}},s),!1,!0),r(i,()=>e.children),N(),i})()};var ge=p("<input>");const D=t=>{const[e,s]=F(t,["class"]);return(()=>{var a=u(ge);return H(a,U({get class(){return`w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg text-text placeholder:text-gray-500 focus:outline-none focus:border-accent focus:ring-2 focus:ring-accent/20 transition-all ${e.class||""}`}},s),!1,!1),N(),a})()};var be=p('<div class="glass-card p-8 shadow-xl max-w-lg mx-auto text-text"><h2 class="text-2xl font-semibold mb-6 text-center">Upload your sports clip</h2><div class=space-y-4><div><label class="block text-sm font-medium mb-2 opacity-80">Title</label><!$><!/></div><div><label class="block text-sm font-medium mb-2 opacity-80">Price ($)</label><!$><!/></div><div><label class="block text-sm font-medium mb-2 opacity-80">Video File</label><label class="flex flex-col items-center justify-center w-full h-32 border-2 border-white/10 border-dashed rounded-lg cursor-pointer bg-white/5 hover:bg-white/10 transition"><div class="flex flex-col items-center justify-center pt-5 pb-6"><!$><!/><p class="text-sm text-gray-400"></p></div><input type=file accept=video/* class=hidden></label></div><!$><!/><!$><!/><!$><!/>'),xe=p('<div class="bg-red-500/20 border border-red-500/50 text-red-300 px-4 py-3 rounded-lg text-sm">'),me=p('<div class="bg-accent/20 border border-accent/50 text-accent px-4 py-3 rounded-lg text-sm">Upload successful! Your video is now available in the marketplace.'),fe=p('<svg class="animate-spin h-5 w-5"xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 24 24"><circle class=opacity-25 cx=12 cy=12 r=10 stroke=currentColor stroke-width=4></circle><path class=opacity-75 fill=currentColor d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">');function $e(){const[t,e]=f(null),[s,a]=f(""),[g,i]=f("20"),[h,o]=f(!1),[E,b]=f(""),[B,y]=f(!1);async function L(){o(!0),b(""),y(!1);const x=t();if(!x){b("Please select a file"),o(!1);return}if(!s().trim()){b("Please enter a title"),o(!1);return}try{const $=`${Date.now()}-${x.name}`,{data:d,error:m}=await k.storage.from("videos").upload($,x,{cacheControl:"3600",upsert:!1});if(m){b(m.message),o(!1);return}const{data:w}=k.storage.from("videos").getPublicUrl(d.path),{error:_}=await k.from("videos").insert({title:s(),price:parseFloat(g()),file_url:d.path,public_url:w.publicUrl,created_at:new Date().toISOString()});if(_){b(_.message),o(!1);return}y(!0),e(null),a(""),i("20"),setTimeout(()=>{y(!1)},3e3)}catch($){b($.message||"An unexpected error occurred")}finally{o(!1)}}return(()=>{var x=u(be),$=x.firstChild,d=$.nextSibling,m=d.firstChild,w=m.firstChild,_=w.nextSibling,[M,V]=c(_.nextSibling),S=m.nextSibling,O=S.firstChild,Y=O.nextSibling,[q,G]=c(Y.nextSibling),P=S.nextSibling,J=P.firstChild,K=J.nextSibling,C=K.firstChild,Q=C.firstChild,[I,R]=c(Q.nextSibling),W=I.nextSibling,X=C.nextSibling,Z=P.nextSibling,[T,ee]=c(Z.nextSibling),te=T.nextSibling,[z,le]=c(te.nextSibling),re=z.nextSibling,[ae,se]=c(re.nextSibling);return r(m,n(D,{placeholder:"Enter video title",get value(){return s()},onInput:l=>a(l.currentTarget.value)}),M,V),r(S,n(D,{type:"number",placeholder:"20.00",get value(){return g()},onInput:l=>i(l.currentTarget.value),min:"0",step:"0.01"}),q,G),r(C,n(j,{class:"w-8 h-8 mb-2 text-accent"}),I,R),r(W,(()=>{var l=v(()=>!!t());return()=>l()?t().name:"Click to upload or drag and drop"})()),X.addEventListener("change",l=>e(l.currentTarget.files?.[0]||null)),r(d,(()=>{var l=v(()=>!!E());return()=>l()&&(()=>{var A=u(xe);return r(A,E),A})()})(),T,ee),r(d,(()=>{var l=v(()=>!!B());return()=>l()&&u(me)})(),z,le),r(d,n(pe,{get disabled(){return h()},onClick:L,class:"w-full flex items-center justify-center gap-2",get children(){return v(()=>!!h())()?[u(fe),"Uploading..."]:[n(j,{class:"w-5 h-5"}),"Upload"]}}),ae,se),x})()}var he=p('<div class="min-h-screen py-12 px-4"><div class="max-w-4xl mx-auto"><!$><!/><!$><!/>');function we(){return(()=>{var t=u(he),e=t.firstChild,s=e.firstChild,[a,g]=c(s.nextSibling),i=a.nextSibling,[h,o]=c(i.nextSibling);return r(e,n(ne,{href:"/",class:"inline-flex items-center gap-2 text-accent hover:text-green-300 mb-8 transition-colors",get children(){return[n(ie,{class:"w-5 h-5"}),"Back to Home"]}}),a,g),r(e,n($e,{}),h,o),t})()}export{we as default};
